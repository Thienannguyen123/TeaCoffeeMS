version: '3.8'

services:
  app:
    # Build image tá»« Dockerfile trong thÆ° má»¥c hiá»‡n táº¡i
    build: .
    container_name: teacoffeems-backend-dev
    
    # ğŸ”¥ QUAN TRá»ŒNG: ThÃªm dÃ²ng nÃ y Ä‘á»ƒ Docker cháº¡y giá» Viá»‡t Nam
    # Náº¿u khÃ´ng cÃ³ dÃ²ng nÃ y, cron job 21:00 tá»‘i sáº½ cháº¡y lÃºc 4:00 sÃ¡ng hÃ´m sau
    environment:
      - TZ=Asia/Ho_Chi_Minh
      
    # Tá»± Ä‘á»™ng khá»Ÿi Ä‘á»™ng láº¡i náº¿u app bá»‹ lá»—i (quan trá»ng cho Cron Job)
    restart: always

    ports:
      # Ãnh xáº¡ port 5000 cá»§a mÃ¡y báº¡n vÃ o port 5000 cá»§a container
      - "5000:5000"
      
    env_file:
      # Náº¡p cÃ¡c biáº¿n mÃ´i trÆ°á»ng tá»« file .env
      - ./.env
      
    # PHáº¦N QUAN TRá»ŒNG NHáº¤T: Volumes
    volumes:
      - .:/app        # âœ” cháº¡y Ä‘Ãºng path
      - /app/node_modules  # âœ” trÃ¡nh ghi Ä‘Ã¨ node_modules